var W=Object.defineProperty;var F=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var R=(s,r,o)=>r in s?W(s,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[r]=o,P=(s,r)=>{for(var o in r||(r={}))Y.call(r,o)&&R(s,o,r[o]);if(F)for(var o of F(r))Z.call(r,o)&&R(s,o,r[o]);return s};import{e as q,j as a,F as A,a as t,B as y,r as h,u as Q,b as V,c as _,H as D,D as J,V as k,I as O,d as B,S as $,T as p,G as X,M as ee,f as te,g as re,R as ie,h as ae,C as oe}from"./vendor.f89c3d45.js";const ne=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function o(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerpolicy&&(l.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?l.credentials="include":i.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(i){if(i.ep)return;i.ep=!0;const l=o(i);fetch(i.href,l)}};ne();var se="/react-interview/assets/header_logo.1094da8d.png";const le={baseStyle:{display:"flex",flexDirection:"column",alignItems:"center",gap:6},variants:{rounded:{padding:8,borderRadius:"40px",boxShadow:"xl",border:"2px solid"},smooth:{padding:6,borderRadius:"base",boxShadow:"md"}},defaultProps:{variant:"smooth"}},ce={baseStyle:{fontWeight:"bold",borderRadius:"25px",_hover:{bg:"black"}},sizes:{sm:{fontSize:"sm",px:4,py:3},md:{fontSize:"md",px:6,py:4}},variants:{outline:{border:"2px solid"},ghost:{border:"0px solid"},solid:{color:"white"}},defaultProps:{size:"md",variant:"outline"}},de={baseStyle:{bg:"white"}};var ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",Button:ce,Input:de});const he={brand:{green:"#42E794",darkGreen:"#1E7B75",red:"#FF4658",orange:"#FF6105",lightBlue:"#2ab8ff",darkBlue:"#1467FF",blue:"#2AB8FF",purple:"#630CB2",yellow:"#fff95e"},blue:{500:"#2ab8ff",600:"#1467FF"},yellow:{100:"#fff95e"},red:{100:"#ff4658"},pink:{100:"#e748b9"}},C=q({colors:he,components:P({Card:le},ue)});const j=({children:s,color:r=C.colors.brand.blue,size:o=["50%","50%"],globSizes:c=[[40,80],[60,50],[20,80]],globPositions:i=[[20,10],[10,20],[20,15]],top:l,left:d,right:S,bottom:x,opacity:N=1,speed:f,radius:E,rotate:g})=>a(A,{children:[a("div",{className:"blob",style:{top:l,left:d,right:S,bottom:x,width:o[0],height:o[1],opacity:N,transform:g?`rotate(${g}deg)`:void 0},children:[t("div",{className:"glob",style:{backgroundColor:r,width:c[0][0]+"%",height:c[0][1]+"%",top:i[0][0]+"%",left:i[0][1]+"%",animation:f?`move ${f*1200}ms infinite alternate ease-in-out`:void 0,borderRadius:E}}),t("div",{className:"glob1",style:{backgroundColor:r,width:c[1][0]+"%",height:c[1][1]+"%",top:i[1][0]+"%",left:i[1][1]+"%",animation:f?`move ${f*1e3}ms infinite alternate ease-in-out`:void 0,borderRadius:E}}),t("div",{className:"glob2",style:{backgroundColor:r,width:c[2][0]+"%",height:c[2][1]+"%",top:i[2][0]+"%",left:i[2][1]+"%",animation:f?`move ${f*800}ms infinite alternate ease-in-out`:void 0,borderRadius:E}})]}),t("svg",{className:"glob-svg",xmlns:"http://www.w3.org/2000/svg",version:"1.1",children:t("defs",{children:a("filter",{id:"goo",children:[t("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"12",result:"blur"}),t("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9",result:"goo"}),t("feComposite",{in:"SourceGraphic",in2:"goo",operator:"atop"})]})})}),t("svg",{className:"glob-svg",viewBox:"0 0 400 400",children:t("defs",{children:t("filter",{id:"duotone-filter-post-one",children:t("feColorMatrix",{type:"matrix",values:"0.14453125 0 0 0 0.33203125 0.71875 0 0 0 0.27734375 -0.34765625 0 0 0 0.73046875 0 0 0 1 0"})})})})]}),pe=({children:s})=>a(A,{children:[a(y,{overflow:"hidden",className:"globParent",position:"absolute",width:"100vw",height:"100%",minHeight:"100vh",children:[t(j,{size:["60%","60%"],speed:30,globSizes:[[60,65],[70,80],[30,75]],left:"0%",top:"10%",opacity:.5,color:C.colors.brand.green}),t(j,{size:["600px","600px"],left:"-50px",top:"-20px",color:C.colors.brand.green})]}),a(y,{className:"cs-header",position:"absolute",top:"0",right:"0",left:"0",width:"100vw",height:"80px",children:[t("a",{href:"https://characterstrong.com",children:t("img",{className:"header-img",src:se,alt:"CharacterStrong Logo"})}),s]})]}),fe=async s=>{let r=`https://nces.ed.gov/opengis/rest/services/K12_School_Locations/EDGE_GEOCODE_PUBLICLEA_1516/MapServer/0/query?where=UPPER(NAME) LIKE UPPER('%${s}%')&outFields=*&outSR=4326&f=json`,o=[],c=await(await fetch(r)).json();return o=[...c.features?c.features.map(i=>i.attributes):[]],o},ge=async(s,r)=>{let o=`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/Private_School_Locations_Current/FeatureServer/0/query?where=UPPER(NAME) LIKE UPPER('%${s}%')${r?`%20AND%20LEAID%20%3D%20'${r}'`:""}&outFields=*&outSR=4326&f=json`,c=`https://services1.arcgis.com/Ua5sjt3LWTPigjyD/arcgis/rest/services/Public_School_Location_201819/FeatureServer/0/query?where=UPPER(NAME) LIKE UPPER('%${s}%')${r?`%20AND%20LEAID%20%3D%20'${r}'`:""}&outFields=*&outSR=4326&f=json`,i=[],l=await(await fetch(o)).json(),d=await(await fetch(c)).json();return i=[...l.features?l.features.map(S=>S.attributes):[],...d.features?d.features.map(S=>S.attributes):[]],i};var me="/react-interview/assets/school.153b2100.svg";const ve={}.VITE_GOOGLE_MAPS_KEY,Se={width:"100%",height:"400px"},be={lat:39.8283,lng:-98.5795},Ee=()=>{const[s,r]=h.exports.useState(!1),[o,c]=h.exports.useState([]),[i,l]=h.exports.useState([]),[d,S]=h.exports.useState([]),[x,N]=h.exports.useState(""),[f,E]=h.exports.useState(""),[g,G]=h.exports.useState(null),[n,T]=h.exports.useState(null),[u,w]=h.exports.useState(null),[v,H]=h.exports.useState(null),L=Q(),{isLoaded:U}=V({googleMapsApiKey:ve}),K=async()=>{r(!0);try{const e=await fe(x);c(e),l(e)}catch{L({title:"Error",description:"Failed to fetch districts.",status:"error",duration:5e3,isClosable:!0})}r(!1)};h.exports.useEffect(()=>{g&&M()},[g]);const M=async()=>{if(!!g){r(!0);try{const e=await ge(f,g.LEAID);if(S(e),e.length===0)L({title:"No Schools Found",description:`No schools found in the district for the search term "${f}".`,status:"error",duration:5e3,isClosable:!0});else if(L({title:"Schools Found",description:`${e.length} schools found in the district.`,status:"success",duration:5e3,isClosable:!0}),v){const b=new google.maps.LatLngBounds;e.forEach(m=>{m.LAT&&m.LON&&b.extend({lat:m.LAT,lng:m.LON})}),v.fitBounds(b)}}catch{L({title:"Error",description:"Failed to fetch schools.",status:"error",duration:5e3,isClosable:!0})}r(!1)}},z=e=>{H(e)},I=e=>{w(e),e.LAT&&e.LON&&(v==null||v.panTo({lat:e.LAT,lng:e.LON}),v==null||v.setZoom(18))};return a(_,{direction:"column",p:8,height:"100vh",gap:4,children:[t(D,{children:"School Data Finder"}),t(J,{}),a(_,{direction:{base:"column",md:"row"},gap:4,flex:"1",children:[a(k,{flex:"1",spacing:4,children:[t(O,{placeholder:"Search for a district",value:x,onChange:e=>N(e.target.value)}),t(B,{onClick:K,isLoading:s,children:"Search District"}),t($,{placeholder:"Select a district",onChange:e=>{const b=i.find(m=>m.LEAID===e.target.value);G(b||null),T(null),w(null)},children:i.map(e=>t("option",{value:e.LEAID,children:e.NAME},e.LEAID))})]}),a(k,{flex:"1",spacing:4,visibility:g?"visible":"hidden",children:[t(O,{placeholder:"Search for a school",value:f,onChange:e=>E(e.target.value),disabled:!g}),t(B,{onClick:M,isLoading:s,children:"Search School"}),t($,{placeholder:"Select a school",onChange:e=>{const b=d.find(m=>(m==null?void 0:m.NCESSCH)===e.target.value);T(b||null),I(b)},disabled:!g,children:d.map(e=>t("option",{value:e==null?void 0:e.NCESSCH,children:e==null?void 0:e.NAME},e==null?void 0:e.NCESSCH))})]}),t(y,{flex:"1",borderWidth:1,borderRadius:"md",p:4,visibility:n?"visible":"hidden",children:n?a(A,{children:[t(D,{size:"md",children:n==null?void 0:n.NAME}),a(p,{children:["City: ",n==null?void 0:n.CITY]}),a(p,{children:["State: ",n==null?void 0:n.STATE]}),a(p,{children:["ZIP: ",n==null?void 0:n.ZIP]}),a(p,{children:["Street: ",n==null?void 0:n.STREET]}),a(p,{children:["County: ",n==null?void 0:n.NMCNTY]})]}):t(p,{children:"Select a school to view details"})})]}),t(y,{mt:4,flex:"1",children:U?a(X,{mapContainerStyle:Se,center:be,zoom:5,onLoad:z,children:[d.map(e=>e.LAT&&e.LON?t(ee,{position:{lat:e.LAT,lng:e.LON},icon:{url:me},onClick:()=>I(e)},e.NCESSCH):null),u&&u.LAT&&u.LON&&t(te,{position:{lat:u.LAT,lng:u.LON},onCloseClick:()=>w(null),children:a(y,{children:[t(D,{size:"sm",children:u.NAME}),a(p,{children:["City: ",u.CITY]}),a(p,{children:["State: ",u.STATE]}),a(p,{children:["ZIP: ",u.ZIP]}),a(p,{children:["Street: ",u.STREET]}),a(p,{children:["County: ",u.NMCNTY]})]})})]}):t(re,{})})]})};function ye(){return a("div",{className:"App",children:[t(pe,{}),t(Ee,{})]})}ie.render(t(ae.StrictMode,{children:t(oe,{theme:C,children:t(ye,{})})}),document.getElementById("root"));
